{"version":3,"sources":["components/PopupWithForm.js","components/ImagePopup.js","contexts/CurrentUserContext.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","images/around-the-us-logo.svg","components/Header.js","components/InfoTooltip.js","components/Register.js","components/Login.js","components/Card.js","components/Main.js","components/Footer.js","components/ProtectedRoute.js","utils/api.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["PopupWithForm","props","className","isClose","name","onClick","onClose","type","onSubmit","title","children","submit","ImagePopup","selectedCard","alt","src","CurrentUserContext","React","createContext","EditProfilePopup","currentUser","useContext","useState","userName","setName","userDescription","description","setDescription","useEffect","e","preventDefault","onUpdateUser","profession","id","value","onChange","target","placeholder","minLength","maxLength","required","EditAvatarPopup","urlRef","useRef","current","focus","onUpdateAvatar","ref","AddPlacePopup","link","setLink","onAddPlaceSubmit","Header","logo","to","userEmail","registrationLink","path","text","handleLogout","InfoTooltip","setRegInfoController","popup","regInfoController","img","Register","setRegistrationLink","email","setEmail","password","setPassword","onRegisterSubmit","Login","onLoginSubmit","Card","isOwn","card","ownerId","userId","isLiked","likesArray","some","like","_id","onCardDelete","cardId","handleCardClick","onCardLike","length","Main","onEditAvatarClick","userAvatar","onEditProfileClick","onAddPlaceClick","cards","map","handleCardDelete","Footer","ProtectedRoute","loggedIn","api","options","this","_baseUrl","baseUrl","_headers","headers","token","res","ok","json","Promise","reject","status","fetch","then","_getResponseData","method","body","JSON","stringify","picture","avatar","about","makeUnlike","makeLike","authorization","auth","JWT","App","navigate","useNavigate","setCurrentUser","setCards","setLoggedIn","setUserEmail","handleCheckToken","checkToken","localStorage","getItem","data","replace","Error","addToken","catch","err","console","log","getInitialCards","result","initialCards","forEach","push","likes","owner","getUserInfo","closeByEscape","key","handleClickClose","document","addEventListener","removeEventListener","isEditProfilePopupClose","setIsEditProfilePopupClose","isAddPlacePopupClose","setIsAddPlacePopupClose","isEditAvatarPopupClose","setIsEditAvatarPopupClose","isDeletePopupClose","setIsDeletePopupClose","isImagePopupClose","setIsImagePopupClose","setSelectedCard","Provider","removeItem","element","imgSrc","changeLikeCardStatus","resCard","deleteCard","filter","register","signUp","signIn","setItem","userInfo","setUserInfo","postCard","avatarUrl","changeProfilePicture","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d1f5729f.chunk.js","sourcesContent":["\r\nfunction PopupWithForm(props) {\r\n\r\n\r\n    return (\r\n        <section className={`popup ${props.isClose ? 'popup_disable' : ''} popup_content_${props.name}`}>\r\n            <div className=\"popup__conainer\">\r\n                <button className=\"popup__close-button\" onClick={props.onClose} type=\"button\" aria-label=\"close-form\"></button>\r\n                <form className=\"popup__form\"\r\n                    name={props.name}\r\n                    onSubmit={props.onSubmit}                  >\r\n                    <h2 className=\"popup__heading\">{props.title}</h2>\r\n                    {props.children}\r\n                    <button className=\"popup__save-button\" type=\"submit\">{props.submit}</button>\r\n                </form>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default PopupWithForm;","\r\nfunction ImagePopup({ isClose, onClose, selectedCard }) {\r\n\r\n    return (\r\n        <section className={`popup ${isClose && 'popup_disable'} popup_content_big-screen-image`}>\r\n            <div className=\"big-screen-image\">\r\n                <button className=\"popup__close-button\" onClick={onClose} type=\"button\" aria-label=\"close-form\" />\r\n                <img className=\"big-screen-image__image\" alt={`photo of ${selectedCard.name}`} src={selectedCard.src} />\r\n                <p className=\"big-screen-image__name\">{selectedCard.name}</p>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import PopupWithForm from './PopupWithForm.js';\r\nimport React, { useState } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    const [name, setName] = React.useState(currentUser.userName);\r\n    const [description, setDescription] = React.useState(currentUser.userDescription);\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.userName);\r\n        setDescription(currentUser.userDescription);\r\n    }, [currentUser, props.isClose]);\r\n\r\n    function handleNameChange(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function handleDescriptionChange(e) {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onUpdateUser({\r\n            name: name,\r\n            profession: description,\r\n        });\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <PopupWithForm\r\n            isClose={props.isClose}\r\n            onSubmit={handleSubmit}\r\n            name=\"profile-edit\"\r\n            title=\"Edit profile\"\r\n            submit=\"Save\"\r\n            onClose={props.onClose}>\r\n            <input\r\n                className=\"popup__text-input popup__text-input_content_name\"\r\n                id=\"input-name\"\r\n                value={name || ''}\r\n                onChange={handleNameChange}\r\n                type=\"text\"\r\n                placeholder=\"Name\"\r\n                name=\"name\"\r\n                minLength=\"2\"\r\n                maxLength=\"40\"\r\n                required />\r\n            <span className=\"popup__text-input-error\" id=\"input-name-error\" />\r\n            <input\r\n                className=\"popup__text-input popup__text-input_content_profession\"\r\n                id=\"input-profession\"\r\n                value={description || ''}\r\n                onChange={handleDescriptionChange}\r\n                type=\"text\"\r\n                placeholder=\"About me\"\r\n                name=\"profession\"\r\n                minLength=\"2\"\r\n                maxLength=\"200\"\r\n                required />\r\n            <span className=\"popup__text-input-error\" id=\"input-profession-error\" />\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport { useRef, useEffect } from 'react';\r\n\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n    const urlRef = React.useRef(null);\r\n\r\n    useEffect(() => {\r\n        urlRef.current.focus();\r\n      }, []);\r\n \r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onUpdateAvatar(urlRef.current.value);\r\n        urlRef.current.value = \"\";\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            isClose={props.isClose}\r\n            name=\"change-profile-picture\"\r\n            title=\"Change profile picture\"\r\n            submit=\"Save\"\r\n            onClose={props.onClose}\r\n            onSubmit={handleSubmit}>\r\n            <input\r\n                className=\"popup__text-input popup__text-input_content_picture\"\r\n                id=\"input-picture\"\r\n                type=\"url\"\r\n                ref={urlRef}\r\n                placeholder=\"Image link\"\r\n                name=\"picture\"\r\n                required />\r\n            <span className=\"popup__text-input-error\" id=\"input-picture-error\" />\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React, { useRef } from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n    const [name, setName] = React.useState(\"\");\r\n    const [link, setLink] = React.useState(\"\");\r\n\r\n    function handleNameChange(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function handleLinkChange(e) {\r\n        setLink(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onAddPlaceSubmit({\r\n            name: name,\r\n            link: link,\r\n        });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setName('');\r\n        setLink('');\r\n    }, [props.isClose]);\r\n\r\n    return (\r\n        <PopupWithForm\r\n            isClose={props.isClose}\r\n            name=\"change-profile-picture\"\r\n            title=\"Change profile picture\"\r\n            submit=\"Save\"\r\n            onClose={props.onClose}\r\n            onSubmit={handleSubmit}\r\n        >\r\n            <input\r\n                onChange={handleNameChange}\r\n                value={name}\r\n                className=\"popup__text-input popup__text-input_content_place-name\"\r\n                id=\"input-place-name\"\r\n                type=\"text\"\r\n                placeholder=\"Title\"\r\n                name=\"place-name\"\r\n                minLength=\"1\"\r\n                maxLength=\"30\"\r\n                required />\r\n            <span className=\"popup__text-input-error\" id=\"input-place-name-error\" />\r\n            <input\r\n                onChange={handleLinkChange}\r\n                value={link}\r\n                className=\"popup__text-input popup__text-input_content_link\"\r\n                id=\"input-link\"\r\n                type=\"url\"\r\n                placeholder=\"Image link\"\r\n                name=\"link\"\r\n                required />\r\n            <span className=\"popup__text-input-error\" id=\"input-link-error\" />\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default AddPlacePopup;","export default __webpack_public_path__ + \"static/media/around-the-us-logo.c7581985.svg\";","import React from 'react';\r\nimport logo from '../images/around-the-us-logo.svg';\r\nimport { Link } from 'react-router-dom';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\n\r\n\r\nfunction Header(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n\r\n    function Logout() {\r\n        if (props.registrationLink.text === \"Log out\") {\r\n            props.handleLogout();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <img className=\"header__image\" src={logo} id=\"around-the-us-logo\"\r\n                alt=\"around the u.s. logo\" />\r\n            <nav className='header__navigator'>\r\n                <Link className='header__navigator-item' to=\"/\">{props.userEmail ? props.userEmail : \" \"}</Link>\r\n                <Link\r\n                    className='header__navigator-item'\r\n                    to={props.registrationLink.path ? props.registrationLink.path : \"/\"}\r\n                    onClick={Logout}\r\n                >\r\n                    {props.registrationLink.text}\r\n                </Link>\r\n            </nav>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","function InfoTooltip(props) {\r\n\r\n\r\n    return (\r\n        <div className=\"popup\">\r\n            <section className=\"registration-info\">\r\n                <button\r\n                    className=\"registration-info__close-button popup__close-button\"\r\n                    type=\"button\"\r\n                    aria-label=\"close-form\"\r\n                    onClick={() => {\r\n                        props.setRegInfoController({ popup: false })\r\n                    }}\r\n                ></button>\r\n                <div className={`registration-info__image ${props.regInfoController.img ? \"registration-info__image_content_v\" : \"registration-info__image_content_x\"}`} />\r\n                <h1 className=\"regisreation-info__title\">{props.regInfoController.text}</h1>\r\n            </section>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default InfoTooltip;","import React from 'react';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Register(props) {\r\n\r\n    React.useEffect(\r\n        () => {\r\n            props.setRegistrationLink({\r\n                text: 'Log in',\r\n                path: '/signin'\r\n            })\r\n        },\r\n        []\r\n    );\r\n\r\n    const [email, setEmail] = React.useState(\"\");\r\n    const [password, setPassword] = React.useState(\"\");\r\n\r\n    function handleEmailChange(e) {\r\n        setEmail(e.target.value);\r\n    }\r\n\r\n    function handlePasswordChange(e) {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onRegisterSubmit({\r\n            email: email,\r\n            password: password\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form className='sign-up' onSubmit={handleSubmit}>\r\n                <h1 className='sign-up__title'>{`Sign up`}</h1>\r\n                <input\r\n                    className='sign-up__email sign-up__input'\r\n                    placeholder='Email'\r\n                    value={email || ''}\r\n                    onChange={handleEmailChange}\r\n                    type=\"email\"\r\n                    required\r\n                />\r\n                <input\r\n                    className='sign-up__password sign-up__input'\r\n                    placeholder='Password'\r\n                    value={password || ''}\r\n                    onChange={handlePasswordChange}\r\n                    type=\"password\"\r\n                    required\r\n                />\r\n                <button className='sign-up__submit'>Sign up</button>\r\n                <Link to=\"/signin\" className='sign-up__login-link'>Already a member? Log in here!</Link>\r\n            </form>\r\n            {props.regInfoController.popup ? <InfoTooltip\r\n                setRegInfoController={props.setRegInfoController}\r\n                regInfoController={props.regInfoController}\r\n            /> : \"\"}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nfunction Login(props) {\r\n\r\n    React.useEffect(\r\n        () => {\r\n          props.setRegistrationLink({\r\n              text: 'Sign up',\r\n              path: '/signup'\r\n          })\r\n        },\r\n        []\r\n      );\r\n\r\n    const [email, setEmail] = React.useState(\"\");\r\n    const [password, setPassword] = React.useState(\"\");\r\n\r\n    function handleEmailChange(e) {\r\n        setEmail(e.target.value);\r\n    }\r\n\r\n    function handlePasswordChange(e) {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onLoginSubmit({\r\n            email: email,\r\n            password: password\r\n        });\r\n    }\r\n\r\n    return (\r\n        <form className='sign-up' onSubmit={handleSubmit}>\r\n            <h1 className='sign-up__title'>Log in</h1>\r\n            <input\r\n                className='sign-up__email sign-up__input'\r\n                placeholder='Email'\r\n                value={email || ''}\r\n                onChange={handleEmailChange}\r\n                type=\"email\"\r\n                required\r\n            />\r\n            <input\r\n                className='sign-up__password sign-up__input'\r\n                placeholder='Password'\r\n                value={password || ''}\r\n                onChange={handlePasswordChange}\r\n                type=\"password\"\r\n                required\r\n            />\r\n            <button className='sign-up__submit'>Log in</button>\r\n            <Link to=\"/signup\" className='sign-up__login-link'>Not a member yet? Sign up here!</Link>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Card(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = props.card.ownerId === currentUser.userId;\r\n    const isLiked = props.card.likesArray.some(like => like._id === currentUser.userId) ? true : false;\r\n\r\n\r\n    function handleClick() {\r\n        props.handleCardClick({ src: props.card.link, name: props.card.name });\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        props.onCardLike(props.card);\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        props.onCardDelete(props.card.cardId);\r\n    }\r\n\r\n\r\n    return (\r\n        <article className=\"card\" >\r\n            {isOwn && <button className=\"card__delete\" type=\"button\" aria-label=\"delete\" onClick={handleDeleteClick} />}\r\n            <div className=\"card__image-container\">\r\n                <img className=\"card__image\" src={props.card.link} alt={`photo of ${props.card.name}`} onClick={handleClick} />\r\n            </div>\r\n            <div className=\"card__details\">\r\n                <h2 className=\"card__name\">{props.card.name}</h2>\r\n                <div>\r\n                    <button className={`card__heart ${isLiked && \"card__heart_active\"}`} onClick={handleLikeClick} type=\"button\" aria-label=\"like\" />\r\n                    <p className=\"card__like-number\">{props.card.likesArray.length}</p>\r\n                </div>\r\n            </div>\r\n        </article>\r\n    );\r\n}\r\n\r\nexport default Card;","import PopupWithForm from './PopupWithForm.js';\r\nimport ImagePopup from './ImagePopup.js';\r\nimport EditProfilePopup from './EditProfilePopup.js';\r\nimport EditAvatarPopup from './EditAvatarPopup.js';\r\nimport AddPlacePopup from './AddPlacePopup.js';\r\nimport Card from './Card.js';\r\nimport React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\n\r\n\r\nfunction Main(props) {\r\n\r\n    \r\n\r\n    React.useEffect(\r\n        () => {\r\n            props.setRegistrationLink({\r\n                text: 'Log out',\r\n                path: '/signin'\r\n            })\r\n        },\r\n        []\r\n    );\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n\r\n\r\n    return (\r\n        <main className=\"page__main\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__info-container\">\r\n                    <div className=\"profile__avatar-container\">\r\n                        <div className=\"profile__edit-container\" onClick={props.onEditAvatarClick} />\r\n                        <img className=\"profile__avatar\" src={currentUser.userAvatar} alt=\"profile photo\" />\r\n                    </div>\r\n                    <div className=\"profile__info\">\r\n                        <div className=\"profile__name-container\">\r\n                            <h1 className=\"profile__name\">{currentUser.userName}</h1>\r\n                            <button className=\"profile__edit-button\" onClick={props.onEditProfileClick} type=\"button\" aria-label=\"edit-profile\" />\r\n                        </div>\r\n                        <p className=\"profile__proffesion\">{currentUser.userDescription}</p>\r\n                    </div>\r\n                </div>\r\n                <button className=\"profile__add-button\" onClick={props.onAddPlaceClick} type=\"button\" aria-label=\"add\" />\r\n            </section>\r\n            <section className=\"cards\">\r\n                {\r\n                    props.cards.map((card) => {\r\n                        return (\r\n                            <Card\r\n                                onCardDelete={props.onCardDelete}\r\n                                card={card}\r\n                                handleCardClick={props.handleCardClick}\r\n                                onCardLike={props.onCardLike}\r\n                                handleCardDelete={props.handleCardDelete}\r\n                                key={card.cardId ? card.cardId : card._id} />\r\n                        );\r\n                    })\r\n                }\r\n            </section>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n          <p className=\"footer__copyrigth\">&#169; 2021 Around The U.S.</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nfunction ProtectedRoute({ children, loggedIn }) {\r\n  return loggedIn ? children : <Navigate to=\"/signin\" />;\r\n}\r\n\r\nexport default ProtectedRoute;","class Api {\r\n    constructor(options) {\r\n        this._baseUrl = options.baseUrl;\r\n        this._headers = options.headers;\r\n    }\r\n\r\n    setBaseUrl(baseUrl) {\r\n        this._baseUrl = baseUrl;\r\n    }\r\n\r\n    setHeaders(headers) {\r\n        this._headers = headers;\r\n    }\r\n\r\n    addToken(token) {\r\n        this._headers = {\r\n            ...this._headers,\r\n            \"Authorization\" : `Bearer ${token}`\r\n        }\r\n    }\r\n\r\n    _getResponseData(res) {\r\n        if (!res.ok) {\r\n            return Promise.reject(`Error: ${res.status}`);\r\n        }\r\n        return res.json();\r\n    }\r\n\r\n    getInitialCards() {\r\n        return fetch((`${this._baseUrl}/cards`), {\r\n            headers: this._headers\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch((`${this._baseUrl}/users/me`), {\r\n            headers: this._headers\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    postCard(card) {\r\n        return fetch(`${this._baseUrl}/cards`, {\r\n            method: \"POST\",\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: card.name,\r\n                link: card.link\r\n            })\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    deleteCard(cardId) {\r\n        return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n            method: \"DELETE\",\r\n            headers: this._headers\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    makeLike(cardId) {\r\n        return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n            method: \"PUT\",\r\n            headers: this._headers\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    makeUnlike(cardId) {\r\n        return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n            method: \"DELETE\",\r\n            headers: this._headers\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    changeProfilePicture({ picture }) {\r\n        return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n            method: \"PATCH\",\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: picture\r\n            })\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    setUserInfo({ name, profession }) {\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n            method: \"PATCH\",\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: name,\r\n                about: profession\r\n            })\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    changeLikeCardStatus(cardId, isLiked) {\r\n\r\n        if (isLiked) {\r\n            return this.makeUnlike(cardId);\r\n        } else {\r\n\r\n            return this.makeLike(cardId);\r\n        }\r\n    }\r\n}\r\n\r\nexport const api = new Api({\r\n    baseUrl: \"https://around.nomoreparties.co/v1/group-12\",\r\n    headers: {\r\n        authorization: \"f89c2be6-d7fd-45c3-96d0-689f19661cba\",\r\n        \"Content-Type\": \"application/json\"\r\n    }\r\n});\r\n\r\nexport default api;\r\n","class Auth {\r\n    constructor(options) {\r\n        this._baseUrl = options.baseUrl;\r\n        this._headers = options.headers;\r\n    }\r\n\r\n    _getResponseData(res) {\r\n        if (!res.ok) {\r\n            return Promise.reject(`Error: ${res.status}`);\r\n        }\r\n        return res.json();\r\n    }\r\n\r\n    signUp({ password, email }) {\r\n        return fetch(`${this._baseUrl}/signup`, {\r\n            method: \"POST\",\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                password: password,\r\n                email: email\r\n            })\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    signIn({ password, email }) {\r\n        return fetch(`${this._baseUrl}/signin`, {\r\n            method: \"POST\",\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                password: password,\r\n                email: email\r\n            })\r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n\r\n    checkToken(JWT) {\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\" : `Bearer ${JWT}`\r\n            } \r\n        })\r\n            .then(res => this._getResponseData(res));\r\n    }\r\n}\r\n\r\nexport const auth = new Auth({\r\n    baseUrl: \"https://register.nomoreparties.co\",\r\n    headers: {        \r\n        \"Content-Type\": \"application/json\"\r\n    }\r\n});\r\n\r\nexport default auth;","import PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport Header from './Header';\nimport Register from './Register.js';\nimport Login from './Login'\nimport Main from './Main';\nimport Footer from './Footer';\nimport ProtectedRoute from './ProtectedRoute';\nimport React, { useState } from 'react';\nimport { Routes, Route, useNavigate } from 'react-router-dom';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport { api } from \"../utils/api.js\";\nimport { auth } from \"../utils/auth\";\n\n\nfunction App() {\n\n  const navigate = useNavigate();\n\n  const [currentUser, setCurrentUser] = useState({});\n\n  const [cards, setCards] = React.useState([]);\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  const [registrationLink, setRegistrationLink] = React.useState({});\n\n  const [regInfoController, setRegInfoController] = React.useState({ popup: false });\n\n  const [userEmail, setUserEmail] = React.useState(\"\");\n\n  function handleLogout() {\n    localStorage.removeItem('JWT');\n    setLoggedIn(false);\n    setUserEmail(\"\");\n    navigate(\"/signin\", { replace: true });\n\n  }\n\n  function handleCheckToken() {\n    auth.checkToken(localStorage.getItem('JWT'))\n      .then((res) => {\n        if (!res.data) {\n          navigate(\"/signin\", { replace: true });\n          return Promise.reject(new Error('cannot find'))\n        }\n        setUserEmail(res.data.email);\n        setLoggedIn(true);\n        api.addToken(localStorage.getItem('JWT'));\n        navigate(\"/\", { replace: true });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleLogin(register) {\n    auth.signIn(register)\n      .then((res) => {\n        if (!res.token) {\n          return Promise.reject(new Error('Incorrect email or password'))\n        }\n        setUserEmail(register.email);\n        localStorage.setItem('JWT', res.token);\n        setLoggedIn(true);\n        api.addToken(res.token);\n        navigate(\"/\", { replace: true });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleRegistration(register) {\n    return auth.signUp(register)\n      .then((res) => {\n        if (!res.data) {\n          setRegInfoController({\n            popup: true,\n            img: false,\n            text: \"Oops, something went wrong! Please try again.\",\n          });\n          return Promise.reject(new Error('Incorrect email or password'))\n        }\n        setRegInfoController({\n          popup: true,\n          img: true,\n          text: \"Success! You have now been registered.\",\n        });\n      })\n      .catch(() => {\n        setRegInfoController({\n          popup: true,\n          img: false,\n          text: \"Oops, something went wrong! Please try again.\",\n        });\n      });\n  }\n\n  function handlePlaceDelete(cardId) {\n    api.deleteCard(cardId)\n      .then(() => {\n        setCards(cards.filter((card) => card.cardId !== cardId));\n        handleClickClose();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api.postCard(card)\n      .then((res) => {\n        card.ownerId = res.owner._id;\n        card.cardId = res._id;\n        card.likesArray = [];\n        setCards([card, ...cards]);\n        handleClickClose();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n  }\n\n  function handleCardLike(card) {\n\n    const isLiked = card.likesArray.some(like => like._id === currentUser.userId);\n\n    api.changeLikeCardStatus(card.cardId, isLiked)\n      .then((res) => {\n        setCards(cards.map((resCard) => {\n          if (resCard.cardId === card.cardId) {\n            resCard.likesArray = res.likes;\n          }\n          return resCard\n        }));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  React.useEffect(\n    () => {\n      handleCheckToken();\n      console.log(api._headers);\n    },\n    []\n  );\n\n  React.useEffect(\n    () => {\n      api.getInitialCards()\n        .then((result) => {\n          const initialCards = [];\n          result.forEach(card => {\n            initialCards.push({\n              name: card.name,\n              link: card.link,\n              likesArray: card.likes,\n              ownerId: card.owner._id,\n              cardId: card._id\n            });\n          });\n          setCards(initialCards);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    []\n  );\n\n\n  React.useEffect(\n    () => {\n      api.getUserInfo()\n        .then((result) => {\n\n          setCurrentUser({\n            ...currentUser,\n            userName: result.name,\n            userDescription: result.about,\n            userAvatar: result.avatar,\n            userId: result._id\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    []\n  );\n\n  React.useEffect(() => {\n    const closeByEscape = (e) => {\n      if (e.key === 'Escape') {\n        handleClickClose();\n      }\n    }\n\n    document.addEventListener('keydown', closeByEscape)\n\n    return () => document.removeEventListener('keydown', closeByEscape)\n  }, [])\n\n\n  const [isEditProfilePopupClose, setIsEditProfilePopupClose] = React.useState(true);\n  const [isAddPlacePopupClose, setIsAddPlacePopupClose] = React.useState(true);\n  const [isEditAvatarPopupClose, setIsEditAvatarPopupClose] = React.useState(true);\n  const [isDeletePopupClose, setIsDeletePopupClose] = React.useState(true);\n  const [isImagePopupClose, setIsImagePopupClose] = React.useState(true);\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n\n  function handleCardClick(imgSrc) {\n    setIsImagePopupClose(false);\n    setSelectedCard(imgSrc);\n  }\n\n  function handleCardDelete() {\n    setIsDeletePopupClose(false);\n  }\n\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupClose(false);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupClose(false);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupClose(false);\n  }\n\n  function handleClickClose() {\n    setIsEditAvatarPopupClose(true);\n    setIsEditProfilePopupClose(true);\n    setIsAddPlacePopupClose(true);\n    setIsImagePopupClose(true);\n    setIsDeletePopupClose(true);\n\n  }\n\n  function handleUpdateUser(userInfo) {\n    api.setUserInfo(userInfo)\n      .then((res) => {\n        handleClickClose();\n        setCurrentUser({\n          ...currentUser,\n          userName: res.name,\n          userDescription: res.about\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(avatarUrl) {\n    api.changeProfilePicture({ picture: avatarUrl })\n      .then(() => {\n        setCurrentUser({\n          ...currentUser,\n          userAvatar: avatarUrl\n        });\n        handleClickClose();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n\n  return (\n    <div className=\"App\">\n      <div className=\"page\">\n        <CurrentUserContext.Provider value={currentUser}>\n          <Header\n            userEmail={userEmail}\n            loggedIn={loggedIn}\n            handleLogout={handleLogout}\n            registrationLink={registrationLink}\n          />\n          <Routes>\n            <Route path=\"/*\" element={\n              <ProtectedRoute loggedIn={loggedIn}>\n                <Main\n                  handleCheckToken={handleCheckToken}\n                  onEditProfileClick={handleEditProfileClick}\n                  onAddPlaceClick={handleAddPlaceClick}\n                  onEditAvatarClick={handleEditAvatarClick}\n                  handleCardClick={handleCardClick}\n                  handleCardDelete={handleCardDelete}\n                  cards={cards}\n                  onCardLike={handleCardLike}\n                  onCardDelete={handlePlaceDelete}\n                  setRegistrationLink={setRegistrationLink}\n                />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/signup\" element={<Register\n              regInfoController={regInfoController}\n              setRegInfoController={setRegInfoController}\n              regInfoController={regInfoController}\n              onRegisterSubmit={handleRegistration}\n              setRegistrationLink={setRegistrationLink}\n            />} />\n            <Route path=\"/signin\" element={<Login\n              onLoginSubmit={handleLogin}\n              setRegistrationLink={setRegistrationLink}\n            />} />\n          </Routes>\n          <Footer />\n          <EditProfilePopup\n            onUpdateUser={handleUpdateUser}\n            isClose={isEditProfilePopupClose}\n            onClose={handleClickClose} />\n          <AddPlacePopup\n            onAddPlaceSubmit={handleAddPlaceSubmit}\n            isClose={isAddPlacePopupClose}\n            onClose={handleClickClose} />\n          <EditAvatarPopup\n            isClose={isEditAvatarPopupClose}\n            onClose={handleClickClose}\n            onUpdateAvatar={handleUpdateAvatar} />\n          <PopupWithForm\n            isClose={isDeletePopupClose}\n            name=\"delete\"\n            title=\"Are you sure?\"\n            submit=\"Yes\"\n            onClose={handleClickClose} />\n          <ImagePopup\n            isClose={isImagePopupClose}\n            onClose={handleClickClose}\n            selectedCard={selectedCard} />\n        </CurrentUserContext.Provider>\n      </div>\n    </div >\n  );\n}\n\nexport default App;\n\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}